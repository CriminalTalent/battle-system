<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PYXIS - 관전자</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* ===============================
       PYXIS Variables (네이비+골드 고정)
       =============================== */
    :root {
      /* 기존 네이비+골드 색상 시스템 고정 */
      --deep-navy: #00080D;
      --deep-navy-2: #001E35;
      --deep-navy-3: #0D1B2A;
      --gold-bright: #DCC7A2;
      --gold-dark: #D4BA8D;
      --gold-muted: #B5A082;

      /* 텍스트 컬러 */
      --text: #F5E6B8;
      --text-dim: #C4B599;
      --text-muted: #9C9270;

      /* 배경 & 표면 */
      --bg-primary: linear-gradient(135deg, #0D1B2A 0%, #00080D 50%, #001E35 100%);
      --bg-secondary: rgba(13, 27, 42, 0.95);
      --surface-1: rgba(21, 34, 56, 0.8);
      --surface-2: rgba(28, 45, 73, 0.6);
      --glass-1: rgba(220, 199, 162, 0.08);
      --glass-2: rgba(220, 199, 162, 0.12);
      --glass-subtle: rgba(220, 199, 162, 0.04);

      /* 보더 */
      --border-1: rgba(220, 199, 162, 0.25);
      --border-2: rgba(220, 199, 162, 0.4);
      --border-subtle: rgba(220, 199, 162, 0.15);

      /* 그림자 */
      --shadow-soft: 0 8px 32px rgba(0, 8, 13, 0.6);
      --shadow-medium: 0 16px 48px rgba(0, 8, 13, 0.8);
      --shadow-hard: 0 24px 64px rgba(0, 0, 0, 0.9);
      --shadow-inset: inset 0 2px 8px rgba(0, 8, 13, 0.3);
      --shadow-glow: 0 0 24px rgba(220, 199, 162, 0.15);
      --shadow-intense: 0 0 60px rgba(220, 199, 162, 0.3);

      /* 상태 색상 */
      --success: #27AE60;
      --warning: #F39C12;
      --danger: #E74C3C;
      --info: #3498DB;

      /* 블러 효과 */
      --blur-light: blur(12px);
      --blur-medium: blur(20px);
      --blur-heavy: blur(32px);

      /* 반지름 */
      --radius: 16px;
      --radius-small: 8px;
      --radius-large: 24px;

      /* 폰트 */
      --serif: 'Cinzel', serif;
      --sans: 'Inter', system-ui, sans-serif;

      /* 트랜지션 */
      --transition-fast: all 0.2s cubic-bezier(0.4, 0.0, 0.2, 1);
      --transition-normal: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
      --transition-slow: all 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    /* ===============================
       Base Reset & Typography
       =============================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      min-height: 100vh;
      font-family: var(--sans);
      background: var(--bg-primary);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      top: -50%;
      left: -50%;
      right: -50%;
      bottom: -50%;
      background: 
        radial-gradient(circle at 25% 25%, rgba(220, 199, 162, 0.06) 0%, transparent 40%),
        radial-gradient(circle at 75% 75%, rgba(220, 199, 162, 0.04) 0%, transparent 40%),
        radial-gradient(circle at 50% 50%, rgba(212, 183, 126, 0.03) 0%, transparent 40%);
      animation: cosmic-drift 25s ease-in-out infinite;
      z-index: -1;
    }

    /* ===============================
       Enhanced Header with Dramatic Effects
       =============================== */
    .header {
      position: relative;
      padding: 32px 0 40px;
      background: var(--bg-primary);
      backdrop-filter: var(--blur-heavy);
      border-bottom: 2px solid var(--border-1);
      box-shadow: var(--shadow-hard), var(--shadow-intense);
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      right: -50%;
      bottom: -50%;
      background: 
        radial-gradient(circle at 20% 30%, rgba(220, 199, 162, 0.12) 0%, transparent 35%),
        radial-gradient(circle at 80% 70%, rgba(220, 199, 162, 0.08) 0%, transparent 35%);
      animation: aurora-dance 18s ease-in-out infinite;
      z-index: 1;
    }

    .header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(220, 199, 162, 0.08) 50%, 
        transparent 70%);
      animation: energy-sweep 12s ease-in-out infinite;
      z-index: 2;
    }

    .header-content {
      position: relative;
      max-width: 1600px;
      margin: 0 auto;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 10;
    }

    /* Star Field for Spectator Page */
    .star-field {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 3;
    }

    .star {
      position: absolute;
      background: var(--gold-bright);
      border-radius: 50%;
      filter: blur(0.5px);
    }

    .star-1 { 
      top: 18%; left: 12%; 
      width: 2.5px; height: 2.5px;
      box-shadow: 0 0 18px var(--gold-bright), 0 0 35px rgba(220, 199, 162, 0.7);
      animation: star-pulse 4.5s ease-in-out infinite;
    }
    .star-2 { 
      top: 35%; right: 18%; 
      width: 1.8px; height: 1.8px;
      box-shadow: 0 0 14px var(--gold-dark), 0 0 28px rgba(212, 183, 126, 0.6);
      animation: star-pulse 3.8s ease-in-out infinite 1.2s;
    }
    .star-3 { 
      top: 65%; left: 22%; 
      width: 3px; height: 3px;
      box-shadow: 0 0 22px var(--gold-bright), 0 0 44px rgba(220, 199, 162, 0.8);
      animation: star-pulse 5.2s ease-in-out infinite 2.3s;
    }
    .star-4 { 
      top: 82%; right: 28%; 
      width: 1.5px; height: 1.5px;
      box-shadow: 0 0 12px var(--gold-muted), 0 0 24px rgba(181, 160, 130, 0.5);
      animation: star-pulse 3.2s ease-in-out infinite 0.8s;
    }
    .star-5 { 
      top: 45%; left: 68%; 
      width: 2.2px; height: 2.2px;
      box-shadow: 0 0 16px var(--gold-bright), 0 0 32px rgba(220, 199, 162, 0.6);
      animation: star-pulse 4.8s ease-in-out infinite 1.8s;
    }

    /* Massive Lens Flare for Spectator Page */
    .lens-flare {
      position: absolute;
      top: 15%;
      right: 12%;
      width: 350px;
      height: 350px;
      pointer-events: none;
      z-index: 4;
    }

    .lens-flare-core {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 35px;
      height: 35px;
      background: radial-gradient(circle, 
        rgba(255, 255, 255, 1) 0%,
        rgba(220, 199, 162, 0.95) 25%,
        rgba(212, 183, 126, 0.8) 50%,
        transparent 100%);
      border-radius: 50%;
      box-shadow: 
        0 0 35px rgba(255, 255, 255, 1),
        0 0 70px rgba(220, 199, 162, 0.8),
        0 0 140px rgba(212, 183, 126, 0.6),
        0 0 210px rgba(220, 199, 162, 0.4);
      animation: core-intense-pulse 3.5s ease-in-out infinite;
    }

    .lens-flare-rays {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 320px;
      height: 320px;
    }

    .lens-flare-rays::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 4px;
      height: 320px;
      background: linear-gradient(to bottom,
        transparent 0%,
        rgba(255, 255, 255, 0.9) 25%,
        rgba(255, 255, 255, 1) 50%,
        rgba(255, 255, 255, 0.9) 75%,
        transparent 100%);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(220, 199, 162, 0.6);
    }

    .lens-flare-rays::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(90deg);
      width: 4px;
      height: 320px;
      background: linear-gradient(to bottom,
        transparent 0%,
        rgba(255, 255, 255, 0.9) 25%,
        rgba(255, 255, 255, 1) 50%,
        rgba(255, 255, 255, 0.9) 75%,
        transparent 100%);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(220, 199, 162, 0.6);
    }

    .lens-flare-diagonal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(45deg);
      width: 3px;
      height: 250px;
      background: linear-gradient(to bottom,
        transparent 0%,
        rgba(255, 255, 255, 0.8) 35%,
        rgba(255, 255, 255, 1) 50%,
        rgba(255, 255, 255, 0.8) 65%,
        transparent 100%);
      box-shadow: 0 0 6px rgba(255, 255, 255, 0.7);
    }

    .lens-flare-diagonal2 {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-45deg);
      width: 3px;
      height: 250px;
      background: linear-gradient(to bottom,
        transparent 0%,
        rgba(255, 255, 255, 0.8) 35%,
        rgba(255, 255, 255, 1) 50%,
        rgba(255, 255, 255, 0.8) 65%,
        transparent 100%);
      box-shadow: 0 0 6px rgba(255, 255, 255, 0.7);
    }

    /* Plasma Orbs for Spectator */
    .plasma-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(1.5px);
      animation: plasma-drift 7s ease-in-out infinite;
    }

    .orb-1 {
      top: 25%;
      right: 45%;
      width: 70px;
      height: 70px;
      background: radial-gradient(circle, 
        rgba(220, 199, 162, 0.5) 0%, 
        rgba(220, 199, 162, 0.25) 40%, 
        transparent 70%);
      animation-delay: 0s;
      box-shadow: 0 0 50px rgba(220, 199, 162, 0.4);
    }

    .orb-2 {
      top: 50%;
      right: 65%;
      width: 45px;
      height: 45px;
      background: radial-gradient(circle, 
        rgba(212, 183, 126, 0.4) 0%, 
        rgba(212, 183, 126, 0.2) 40%, 
        transparent 70%);
      animation-delay: 2.5s;
      box-shadow: 0 0 35px rgba(212, 183, 126, 0.3);
    }

    .orb-3 {
      top: 75%;
      right: 35%;
      width: 85px;
      height: 85px;
      background: radial-gradient(circle, 
        rgba(220, 199, 162, 0.35) 0%, 
        rgba(220, 199, 162, 0.18) 40%, 
        transparent 70%);
      animation-delay: 5s;
      box-shadow: 0 0 65px rgba(220, 199, 162, 0.25);
    }

    /* Brand Title */
    .brand-title {
      font-family: var(--serif);
      font-size: clamp(2.5rem, 4.5vw, 3.8rem);
      font-weight: 700;
      background: linear-gradient(135deg, 
        var(--gold-bright) 0%, 
        var(--gold-dark) 40%, 
        var(--gold-bright) 70%, 
        var(--gold-dark) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 25px rgba(220, 199, 162, 0.6);
      letter-spacing: 0.12em;
      position: relative;
      z-index: 10;
    }

    .brand-title::before {
      content: '✦';
      position: absolute;
      left: -50px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2rem;
      color: var(--gold-bright);
      text-shadow: 0 0 20px var(--gold-bright);
      animation: star-rotate 6s ease-in-out infinite;
    }

    .brand-title::after {
      content: '✧';
      position: absolute;
      right: -50px;
      top: 25%;
      font-size: 1.3rem;
      color: var(--gold-dark);
      text-shadow: 0 0 15px var(--gold-dark);
      animation: star-rotate 6s ease-in-out infinite reverse 3s;
    }

    .spectator-badge {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      background: var(--glass-1);
      border: 1px solid var(--border-1);
      border-radius: var(--radius);
      backdrop-filter: var(--blur-light);
      box-shadow: var(--shadow-inset);
    }

    .spectator-icon {
      width: 14px;
      height: 14px;
      background: var(--info);
      border-radius: 50%;
      box-shadow: 0 0 16px var(--info);
      animation: pulse 2s ease-in-out infinite;
    }

    .spectator-text {
      font-weight: 600;
      color: var(--text-dim);
      font-size: 14px;
    }

    /* ===============================
       Main Layout
       =============================== */
    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 32px 24px;
      display: grid;
      grid-template-columns: 1fr;
      gap: 32px;
      align-items: start;
    }

    #authSection {
      max-width: 600px;
      justify-self: center;
    }

    #spectatorInterface {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 32px;
      align-items: start;
    }

    /* ===============================
       Enhanced Card System
       =============================== */
    .card {
      background: var(--surface-1);
      border: 1px solid var(--border-1);
      border-radius: var(--radius);
      padding: 28px;
      position: relative;
      overflow: hidden;
      transition: var(--transition-normal);
      backdrop-filter: var(--blur-light);
      box-shadow: var(--shadow-soft), var(--shadow-inset);
      margin-bottom: 24px;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 20%;
      right: 20%;
      height: 1px;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(220, 199, 162, 0.4), 
        transparent);
    }

    .card:hover {
      transform: translateY(-4px);
      border-color: var(--border-2);
      box-shadow: var(--shadow-medium), 
                  var(--shadow-inset), 
                  0 0 40px rgba(220, 199, 162, 0.1);
    }

    .section-header {
      margin-bottom: 24px;
    }

    .section-title {
      font-family: var(--serif);
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--gold-bright);
      position: relative;
      padding-left: 24px;
      letter-spacing: 0.02em;
      text-shadow: 0 2px 8px rgba(220, 199, 162, 0.3);
    }

    .section-title::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 6px;
      height: 70%;
      background: linear-gradient(to bottom, 
        var(--gold-bright), 
        var(--gold-dark));
      border-radius: 3px;
      box-shadow: 0 0 10px rgba(220, 199, 162, 0.4);
    }

    /* ===============================
       Form Elements
       =============================== */
    .field {
      margin-bottom: 24px;
    }

    .field label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-dim);
      font-size: 14px;
      letter-spacing: 0.02em;
    }

    .input {
      width: 100%;
      padding: 16px 20px;
      background: var(--surface-2);
      border: 2px solid var(--border-subtle);
      border-radius: var(--radius);
      color: var(--text);
      font-size: 16px;
      font-weight: 500;
      transition: var(--transition-normal);
      backdrop-filter: var(--blur-light);
    }

    .input:focus {
      outline: none;
      border-color: var(--gold-bright);
      background: rgba(28, 45, 73, 0.8);
      box-shadow: 0 0 0 4px rgba(220, 199, 162, 0.15),
                  0 0 20px rgba(220, 199, 162, 0.1);
    }

    /* ===============================
       Button System
       =============================== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 16px 24px;
      border: none;
      border-radius: var(--radius);
      font-family: var(--sans);
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition-normal);
      position: relative;
      overflow: hidden;
      text-decoration: none;
      letter-spacing: 0.02em;
      min-width: 140px;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.2), 
        transparent);
      transition: left 0.6s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-gold {
      background: linear-gradient(135deg, var(--gold-bright), var(--gold-dark));
      color: var(--deep-navy);
      box-shadow: 0 4px 16px rgba(220, 199, 162, 0.3);
    }

    .btn-gold:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 8px 24px rgba(220, 199, 162, 0.4);
    }

    .cheer-btn {
      padding: 12px 18px;
      font-size: 14px;
      min-width: auto;
      margin: 4px;
      border-radius: var(--radius-small);
    }

    .cheer-btn.phoenix {
      background: linear-gradient(135deg, #E74C3C, #C0392B);
      color: white;
      border: 1px solid rgba(231, 76, 60, 0.3);
    }

    .cheer-btn.death-eater {
      background: linear-gradient(135deg, #2C3E50, #34495E);
      color: white;
      border: 1px solid rgba(44, 62, 80, 0.3);
    }

    .cheer-btn:hover {
      transform: translateY(-2px) scale(1.05);
    }

    .cheer-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none !important;
    }

    /* ===============================
       Battle Status
       =============================== */
    .battle-status {
      grid-column: 1 / -1;
      text-align: center;
      padding: 32px;
      background: linear-gradient(135deg, 
        rgba(220, 199, 162, 0.1), 
        rgba(220, 199, 162, 0.05));
      border: 1px solid var(--border-1);
      border-radius: var(--radius-large);
      box-shadow: var(--shadow-medium);
      margin-bottom: 24px;
    }

    .status-title {
      font-family: var(--serif);
      font-size: 2rem;
      font-weight: 700;
      color: var(--gold-bright);
      margin-bottom: 16px;
      text-shadow: 0 2px 8px rgba(220, 199, 162, 0.4);
    }

    .status-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .info-item {
      text-align: center;
      padding: 16px;
      background: var(--glass-1);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-small);
      backdrop-filter: var(--blur-light);
    }

    .info-label {
      font-size: 12px;
      color: var(--text-muted);
      font-weight: 600;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .info-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--gold-bright);
    }

    /* ===============================
       Team Components
       =============================== */
    .team-panel {
      display: contents;
    }

    .team-header {
      text-align: center;
      font-family: var(--serif);
      font-weight: 700;
      font-size: 18px;
      color: var(--gold-bright);
      padding: 16px 20px;
      background: linear-gradient(135deg, 
        rgba(220, 199, 162, 0.15), 
        rgba(220, 199, 162, 0.08));
      border: 1px solid var(--border-1);
      border-radius: var(--radius);
      position: relative;
      text-shadow: 0 2px 8px rgba(220, 199, 162, 0.3);
      margin-bottom: 16px;
    }

    .team-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 25%;
      right: 25%;
      height: 1px;
      background: linear-gradient(90deg, 
        transparent, 
        var(--gold-bright), 
        transparent);
    }

    .team-members {
      display: grid;
      gap: 12px;
      margin-bottom: 20px;
    }

    .team-member {
      display: grid;
      grid-template-columns: 48px 1fr auto;
      gap: 12px;
      align-items: center;
      padding: 16px;
      background: var(--glass-1);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-small);
      transition: var(--transition-normal);
    }

    .team-member:hover {
      background: var(--glass-2);
      border-color: var(--border-1);
    }

    .member-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--gold-bright), var(--gold-dark));
      border: 2px solid var(--border-1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: var(--deep-navy);
      box-shadow: 0 4px 12px rgba(220, 199, 162, 0.2);
    }

    .member-info {
      flex: 1;
    }

    .member-name {
      font-weight: 700;
      color: var(--text);
      font-size: 16px;
      margin-bottom: 4px;
    }

    .member-stats {
      font-size: 12px;
      color: var(--text-dim);
      display: flex;
      gap: 8px;
    }

    .member-status {
      padding: 4px 12px;
      border-radius: var(--radius-small);
      font-size: 12px;
      font-weight: 600;
    }

    .status-alive {
      background: rgba(39, 174, 96, 0.2);
      color: var(--success);
      border: 1px solid rgba(39, 174, 96, 0.3);
    }

    .status-dead {
      background: rgba(231, 76, 60, 0.2);
      color: var(--danger);
      border: 1px solid rgba(231, 76, 60, 0.3);
    }

    .status-turn {
      background: rgba(220, 199, 162, 0.2);
      color: var(--gold-bright);
      border: 1px solid var(--border-1);
      animation: turn-glow 2s ease-in-out infinite;
    }

    /* ===============================
       Action Log
       =============================== */
    .action-log {
      height: 400px;
      background: linear-gradient(145deg, 
        rgba(13, 27, 42, 0.95), 
        rgba(21, 34, 56, 0.92));
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius);
      padding: 20px;
      overflow-y: auto;
      backdrop-filter: var(--blur-light);
      box-shadow: inset 0 4px 16px rgba(0, 8, 13, 0.3);
    }

    .log-entry {
      padding: 10px 14px;
      margin-bottom: 10px;
      border-radius: var(--radius-small);
      font-size: 14px;
      background: rgba(220, 199, 162, 0.05);
      border-left: 3px solid transparent;
      animation: log-entry-appear 0.3s ease-out;
    }

    .log-entry.system {
      color: var(--gold-bright);
      border-left-color: var(--gold-bright);
    }

    .log-entry.action {
      color: var(--text);
      border-left-color: var(--info);
    }

    .log-entry.damage {
      color: var(--danger);
      border-left-color: var(--danger);
    }

    .log-entry.heal {
      color: var(--success);
      border-left-color: var(--success);
    }

    .log-entry.critical {
      background: rgba(220, 199, 162, 0.1);
      border-left-color: var(--warning);
      color: var(--warning);
      font-weight: 600;
    }

    .log-time {
      color: var(--text-muted);
      font-size: 11px;
      margin-right: 8px;
    }

    /* ===============================
       Cheer Section
       =============================== */
    .cheer-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      margin-top: 20px;
      padding: 20px;
      background: var(--glass-1);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius);
      backdrop-filter: var(--blur-light);
    }

    /* ===============================
       Responsive Design
       =============================== */
    @media (max-width: 1200px) {
      #spectatorInterface {
        grid-template-columns: 1fr;
        gap: 24px;
      }
    }

    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 16px;
        text-align: center;
      }

      .container {
        padding: 20px 16px;
      }

      .card {
        padding: 20px 16px;
      }

      .battle-status {
        padding: 24px 16px;
      }

      .cheer-section {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 480px) {
      .brand-title::before,
      .brand-title::after {
        display: none;
      }

      .cheer-section {
        grid-template-columns: 1fr;
      }

      .status-info {
        grid-template-columns: 1fr;
      }
    }

    /* ===============================
       Animations
       =============================== */
    @keyframes star-pulse {
      0%, 100% { 
        opacity: 0.5; 
        transform: scale(1);
      }
      50% { 
        opacity: 1; 
        transform: scale(1.6);
      }
    }

    @keyframes core-intense-pulse {
      0%, 100% { 
        opacity: 0.9; 
        transform: translate(-50%, -50%) scale(1);
      }
      50% { 
        opacity: 1; 
        transform: translate(-50%, -50%) scale(1.3);
      }
    }

    @keyframes plasma-drift {
      0%, 100% { 
        opacity: 0.4; 
        transform: translateY(0px) rotate(0deg);
      }
      33% { 
        opacity: 0.7; 
        transform: translateY(-12px) rotate(120deg);
      }
      66% { 
        opacity: 0.6; 
        transform: translateY(-8px) rotate(240deg);
      }
    }

    @keyframes aurora-dance {
      0%, 100% { 
        transform: rotate(0deg) scale(1); 
        opacity: 0.6;
      }
      50% { 
        transform: rotate(180deg) scale(1.1); 
        opacity: 0.8;
      }
    }

    @keyframes energy-sweep {
      0% { transform: translateX(-100%) skewX(-15deg); }
      100% { transform: translateX(100%) skewX(-15deg); }
    }

    @keyframes star-rotate {
      0%, 100% { 
        transform: translateY(-50%) rotate(0deg) scale(1); 
        opacity: 0.8;
      }
      50% { 
        transform: translateY(-50%) rotate(180deg) scale(1.2); 
        opacity: 1;
      }
    }

    @keyframes cosmic-drift {
      0%, 100% { 
        transform: rotate(0deg) scale(1); 
        opacity: 0.5;
      }
      33% { 
        transform: rotate(120deg) scale(1.05); 
        opacity: 0.7;
      }
      66% { 
        transform: rotate(240deg) scale(0.95); 
        opacity: 0.6;
      }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }

    @keyframes turn-glow {
      0%, 100% { 
        box-shadow: 0 0 10px rgba(220, 199, 162, 0.3);
      }
      50% { 
        box-shadow: 0 0 20px rgba(220, 199, 162, 0.6);
      }
    }

    @keyframes log-entry-appear {
      from { 
        opacity: 0; 
        transform: translateX(-20px);
      }
      to { 
        opacity: 1; 
        transform: translateX(0);
      }
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--surface-2);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, var(--gold-bright), var(--gold-dark));
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, var(--gold-dark), var(--gold-bright));
    }
  </style>
</head>
<body>
  <!-- Enhanced Header with Dramatic Effects -->
  <header class="header">
    <div class="star-field">
      <div class="star star-1"></div>
      <div class="star star-2"></div>
      <div class="star star-3"></div>
      <div class="star star-4"></div>
      <div class="star star-5"></div>
    </div>
    
    <div class="lens-flare">
      <div class="lens-flare-core"></div>
      <div class="lens-flare-rays"></div>
      <div class="lens-flare-diagonal"></div>
      <div class="lens-flare-diagonal2"></div>
      <div class="plasma-orb orb-1"></div>
      <div class="plasma-orb orb-2"></div>
      <div class="plasma-orb orb-3"></div>
    </div>
    
    <div class="header-content">
      <div class="brand-logo">
        <h1 class="brand-title">PYXIS</h1>
      </div>
      <div class="spectator-badge">
        <div class="spectator-icon"></div>
        <span class="spectator-text">관전자 모드</span>
      </div>
    </div>
  </header>

  <!-- Main Container -->
  <div class="container">
    <!-- Authentication Section -->
    <div id="authSection" class="card">
      <div class="section-header">
        <h2 class="section-title">관전자 인증</h2>
      </div>
      <form id="authForm">
        <div class="field">
          <label for="spectatorName">관전자 이름</label>
          <input type="text" id="spectatorName" class="input" placeholder="관전자 이름을 입력하세요" required />
        </div>
        <div class="field">
          <label for="spectatorOtp">관전자 OTP</label>
          <input type="text" id="spectatorOtp" class="input" placeholder="관전자 OTP를 입력하세요" required />
        </div>
        <button type="submit" class="btn btn-gold">관전 시작</button>
      </form>
    </div>

    <!-- Spectator Interface (Hidden initially) -->
    <div id="spectatorInterface" style="display: none;">
      <!-- Battle Status -->
      <div class="battle-status">
        <div class="status-title" id="battleTitle">전투 진행 중</div>
        <div class="status-info">
          <div class="info-item">
            <div class="info-label">전투 모드</div>
            <div class="info-value" id="battleMode">2v2</div>
          </div>
          <div class="info-item">
            <div class="info-label">현재 턴</div>
            <div class="info-value" id="currentTurn">1</div>
          </div>
          <div class="info-item">
            <div class="info-label">경과 시간</div>
            <div class="info-value" id="elapsedTime">00:00</div>
          </div>
          <div class="info-item">
            <div class="info-label">관전자</div>
            <div class="info-value" id="spectatorCount">1</div>
          </div>
        </div>
      </div>

      <!-- Team Panels -->
      <div class="team-panel">
        <!-- Phoenix Team -->
        <div class="card">
          <div class="team-header phoenix">불사조 기사단</div>
          <div class="team-members" id="phoenixMembers">
            <!-- Phoenix team members will be populated here -->
          </div>
          
          <div class="cheer-section">
            <button class="cheer-btn phoenix" onclick="spectator.sendCheer('phoenix', '화이팅!')">화이팅!</button>
            <button class="cheer-btn phoenix" onclick="spectator.sendCheer('phoenix', '멋져!')">멋져!</button>
            <button class="cheer-btn phoenix" onclick="spectator.sendCheer('phoenix', '죽으면 죽을 줄 알아')">죽으면 죽을 줄 알아!</button>
            <button class="cheer-btn phoenix" onclick="spectator.sendCheer('phoenix', '잘한다!')">잘한다!</button>
          </div>
        </div>

        <!-- Death Eater Team -->
        <div class="card">
          <div class="team-header death-eater">죽음을 먹는 자들</div>
          <div class="team-members" id="deathEaterMembers">
            <!-- Death Eater team members will be populated here -->
          </div>
          
          <div class="cheer-section">
            <button class="cheer-btn death-eater" onclick="spectator.sendCheer('death-eater', '화이팅!')">화이팅!</button>
            <button class="cheer-btn death-eater" onclick="spectator.sendCheer('death-eater', '멋져!')">멋져!</button>
            <button class="cheer-btn death-eater" onclick="spectator.sendCheer('death-eater', '죽으면 죽을 줄 알아')">죽으면 죽을 줄 알아</button>
            <button class="cheer-btn death-eater" onclick="spectator.sendCheer('death-eater', '잘한다!')">잘한다!</button>
          </div>
        </div>
      </div>

      <!-- Action Log -->
      <div class="card" style="grid-column: 1 / -1;">
        <div class="section-header">
          <h2 class="section-title">실시간 전투 로그</h2>
        </div>
        <div class="action-log" id="actionLog">
          <div class="log-entry system">관전자 모드로 연결되었습니다.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript Implementation -->
  <script>
    // PYXIS Spectator System Implementation
    class PyxisSpectator {
      constructor() {
        this.socket = null;
        this.spectatorData = null;
        this.battleData = null;
        this.isAuthenticated = false;
        this.startTime = null;
        this.timerInterval = null;
        this.cheerCooldown = new Set();
        this.simulatedPlayers = null;

        this.init();
      }

      init() {
        console.log('[PYXIS Spectator] Initializing...');
        this.setupEventListeners();
        this.checkUrlParams();
        this.initSimulatedData();
      }

      setupEventListeners() {
        // Authentication form
        const authForm = document.getElementById('authForm');
        if (authForm) {
          authForm.addEventListener('submit', (e) => {
            e.preventDefault();
            this.authenticateSpectator();
          });
        }
      }

      checkUrlParams() {
        const params = new URLSearchParams(window.location.search);
        const otp = params.get('otp');
        const battleId = params.get('battleId');

        if (otp && battleId) {
          document.getElementById('spectatorOtp').value = otp;
          document.getElementById('spectatorName').focus();
        }
      }

      initSimulatedData() {
        this.simulatedPlayers = {
          phoenix: [
            { 
              name: '해리 포터', 
              hp: 85, 
              maxHp: 100, 
              status: 'turn', 
              stats: { attack: 4, defense: 3, agility: 5, luck: 4 },
              items: { dittany: 2, attackBoost: 1, defenseBoost: 1 }
            },
            { 
              name: '헤르미온느', 
              hp: 92, 
              maxHp: 100, 
              status: 'alive', 
              stats: { attack: 3, defense: 4, agility: 3, luck: 5 },
              items: { dittany: 3, attackBoost: 0, defenseBoost: 2 }
            }
          ],
          deathEater: [
            { 
              name: '벨라트릭스', 
              hp: 78, 
              maxHp: 100, 
              status: 'alive', 
              stats: { attack: 5, defense: 2, agility: 4, luck: 3 },
              items: { dittany: 1, attackBoost: 2, defenseBoost: 0 }
            },
            { 
              name: '루시우스', 
              hp: 100, 
              maxHp: 100, 
              status: 'alive', 
              stats: { attack: 4, defense: 4, agility: 3, luck: 3 },
              items: { dittany: 2, attackBoost: 1, defenseBoost: 1 }
            }
          ]
        };
      }

      async authenticateSpectator() {
        try {
          const name = document.getElementById('spectatorName').value.trim();
          const otp = document.getElementById('spectatorOtp').value.trim();
          
          if (!name || !otp) {
            this.addLog('system', '이름과 OTP를 모두 입력해주세요');
            return;
          }

          this.addLog('system', '인증 중...');
          
          await this.delay(1000);
          
          this.spectatorData = {
            id: this.generateId(),
            name: name,
            joinedAt: new Date()
          };

          this.isAuthenticated = true;
          this.showSpectatorInterface();
          this.startBattleTimer();
          this.populateTeamMembers();
          this.addLog('system', `${name}님이 관전을 시작했습니다!`);

          setTimeout(() => {
            this.simulateBattleEvents();
          }, 2000);

        } catch (error) {
          console.error('[PYXIS Spectator] Auth error:', error);
          this.addLog('system', '인증 실패: ' + error.message);
        }
      }

      showSpectatorInterface() {
        document.getElementById('authSection').style.display = 'none';
        document.getElementById('spectatorInterface').style.display = 'grid';
      }

      populateTeamMembers() {
        this.renderTeamMembers('phoenixMembers', this.simulatedPlayers.phoenix);
        this.renderTeamMembers('deathEaterMembers', this.simulatedPlayers.deathEater);
      }

      renderTeamMembers(containerId, members) {
        const container = document.getElementById(containerId);
        if (!container) return;

        container.innerHTML = '';
        members.forEach(member => {
          const memberElement = document.createElement('div');
          memberElement.className = 'team-member';
          
          const statusClass = member.status === 'turn' ? 'status-turn' : 
                             member.status === 'alive' ? 'status-alive' : 'status-dead';
          
          const hpPercentage = (member.hp / member.maxHp) * 100;
          const hpColor = hpPercentage > 50 ? 'var(--success)' : 
                         hpPercentage > 20 ? 'var(--warning)' : 'var(--danger)';

          const statsStr = `ATK:${member.stats.attack} DEF:${member.stats.defense} AGI:${member.stats.agility} LCK:${member.stats.luck}`;
          const itemsStr = `디터니:${member.items.dittany} 공격강화:${member.items.attackBoost} 방어강화:${member.items.defenseBoost}`;

          memberElement.innerHTML = `
            <div class="member-avatar">${member.name.charAt(0)}</div>
            <div class="member-info">
              <div class="member-name">${member.name}</div>
              <div class="member-stats">
                <div><span style="color: ${hpColor}">HP: ${member.hp}/${member.maxHp}</span></div>
                <div>스탯: ${statsStr}</div>
                <div>아이템: ${itemsStr}</div>
              </div>
            </div>
            <div class="member-status ${statusClass}">
              ${member.status === 'turn' ? '행동 중' : 
                member.status === 'alive' ? '생존' : '사망'}
            </div>
          `;
          
          container.appendChild(memberElement);
        });
      }

      startBattleTimer() {
        this.startTime = new Date();
        this.timerInterval = setInterval(() => {
          this.updateTimer();
        }, 1000);
      }

      updateTimer() {
        if (!this.startTime) return;
        
        const elapsed = Math.floor((new Date() - this.startTime) / 1000);
        const minutes = Math.floor(elapsed / 60);
        const seconds = elapsed % 60;
        
        const timerElement = document.getElementById('elapsedTime');
        if (timerElement) {
          timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
      }

      sendCheer(team, message) {
        if (!this.isAuthenticated) return;
        
        const cheerKey = `${team}-${message}`;
        
        if (this.cheerCooldown.has(cheerKey)) {
          this.addLog('system', '응원 메시지 쿨다운 중입니다 (5초)');
          return;
        }

        this.cheerCooldown.add(cheerKey);
        
        const teamName = team === 'phoenix' ? '불사조 기사단' : '죽음을 먹는 자들';
        this.addLog('system', `${this.spectatorData.name}님이 ${teamName}에게 "${message}" 응원을 보냈습니다!`);

        const cheerBtns = document.querySelectorAll(`.cheer-btn.${team}`);
        cheerBtns.forEach(btn => {
          btn.style.opacity = '0.5';
          btn.disabled = true;
        });

        setTimeout(() => {
          this.cheerCooldown.delete(cheerKey);
          cheerBtns.forEach(btn => {
            btn.style.opacity = '1';
            btn.disabled = false;
          });
        }, 5000);
      }

      simulateBattleEvents() {
        if (!this.isAuthenticated) return;

        const events = [
          { delay: 1000, type: 'action', message: '해리 포터가 벨라트릭스에게 공격을 시도합니다!' },
          { delay: 2000, type: 'system', message: '공격력(4) + 주사위(15) - 방어력(2) = 17 데미지' },
          { delay: 2500, type: 'damage', message: '벨라트릭스가 17 데미지를 받았습니다! (HP: 78 → 61)' },
          { delay: 4000, type: 'action', message: '벨라트릭스가 해리 포터에게 반격을 시도합니다!' },
          { delay: 5000, type: 'critical', message: '치명타 발생! 공격력(5) + 주사위(18) × 2 = 46 데미지!' },
          { delay: 5500, type: 'damage', message: '해리 포터가 46 데미지를 받았습니다! (HP: 85 → 39)' },
          { delay: 7000, type: 'action', message: '헤르미온느가 디터니를 사용합니다!' },
          { delay: 7500, type: 'heal', message: '해리 포터의 HP가 10 회복되었습니다! (HP: 39 → 49)' },
          { delay: 9000, type: 'action', message: '루시우스가 공격 보정기를 사용합니다!' },
          { delay: 9500, type: 'system', message: '아이템 사용 실패! (성공률 10%)' },
          { delay: 11000, type: 'system', message: '턴이 교체됩니다. 죽음을 먹는 자들의 턴입니다!' },
          { delay: 12000, type: 'action', message: '루시우스가 헤르미온느에게 공격합니다!' },
          { delay: 13000, type: 'system', message: '헤르미온느가 회피에 성공했습니다!' },
          { delay: 14500, type: 'action', message: '벨라트릭스가 방어 자세를 취합니다!' }
        ];

        events.forEach((event, index) => {
          setTimeout(() => {
            this.addLog(event.type, event.message);
            
            if (event.type === 'system' && event.message.includes('턴이 교체')) {
              const turnElement = document.getElementById('currentTurn');
              if (turnElement) {
                const currentTurn = parseInt(turnElement.textContent) + 1;
                turnElement.textContent = currentTurn;
              }
              
              // 턴 상태 업데이트
              this.updateTurnStatus();
            }
            
            if (event.type === 'damage') {
              this.updatePlayerHp(event.message);
            }
          }, event.delay);
        });

        // 다음 이벤트 사이클 시작
        setTimeout(() => {
          if (this.isAuthenticated) {
            this.simulateBattleEvents();
          }
        }, 20000);
      }

      updateTurnStatus() {
        // 간단한 턴 상태 시뮬레이션
        const phoenixMembers = this.simulatedPlayers.phoenix;
        const deathEaterMembers = this.simulatedPlayers.deathEater;

        // 모든 플레이어를 alive 상태로 변경
        [...phoenixMembers, ...deathEaterMembers].forEach(player => {
          if (player.status !== 'dead') player.status = 'alive';
        });

        // 랜덤하게 한 명을 턴 상태로 변경
        const allAlive = [...phoenixMembers, ...deathEaterMembers].filter(p => p.status === 'alive');
        if (allAlive.length > 0) {
          const randomPlayer = allAlive[Math.floor(Math.random() * allAlive.length)];
          randomPlayer.status = 'turn';
        }

        // UI 업데이트
        this.populateTeamMembers();
      }

      updatePlayerHp(message) {
        // HP 변화를 실제 데이터에 반영
        const hpMatch = message.match(/(\w+).*?(\d+)\s*→\s*(\d+)/);
        if (hpMatch) {
          const playerName = hpMatch[1];
          const newHp = parseInt(hpMatch[3]);
          
          const allPlayers = [...this.simulatedPlayers.phoenix, ...this.simulatedPlayers.deathEater];
          const player = allPlayers.find(p => p.name.includes(playerName) || playerName.includes(p.name));
          
          if (player) {
            player.hp = newHp;
            if (player.hp <= 0) {
              player.status = 'dead';
            }
            this.populateTeamMembers();
          }
        }
      }

      addLog(type, message) {
        const logViewer = document.getElementById('actionLog');
        if (!logViewer) return;
        
        const logEntry = document.createElement('div');
        logEntry.className = `log-entry ${type}`;
        logEntry.innerHTML = `<span class="log-time">${this.getTimeString()}</span> ${message}`;
        
        logViewer.appendChild(logEntry);
        logViewer.scrollTop = logViewer.scrollHeight;

        // 로그 최대 개수 제한
        const entries = logViewer.querySelectorAll('.log-entry');
        if (entries.length > 100) {
          entries[0].remove();
        }
      }

      getTimeString() {
        return new Date().toLocaleTimeString('ko-KR', { 
          hour: '2-digit', 
          minute: '2-digit', 
          second: '2-digit' 
        });
      }

      generateId() {
        return Math.random().toString(36).substr(2, 8).toUpperCase();
      }

      delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }

      // 정리
      cleanup() {
        if (this.timerInterval) {
          clearInterval(this.timerInterval);
        }
      }
    }

    // Initialize spectator system
    const spectator = new PyxisSpectator();

    // Global function for cheer buttons
    window.spectator = spectator;

    // Event listeners
    document.addEventListener('DOMContentLoaded', () => {
      console.log('[PYXIS Spectator] System loaded successfully');
    });

    // Cleanup on page unload
    window.addEventListener('beforeunload', () => {
      spectator.cleanup();
    });
  </script>
</body>
</html>
