<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PYXIS - 플레이어</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* ===============================
       PYXIS Player Variables (네이비+골드 고정)
       =============================== */
    :root {
      /* 기존 네이비+골드 색상 시스템 고정 */
      --deep-navy: #00080D;
      --deep-navy-2: #001E35;
      --deep-navy-3: #0D1B2A;
      --gold-bright: #DCC7A2;
      --gold-dark: #D4BA8D;
      --gold-muted: #B5A082;

      /* 텍스트 컬러 */
      --text: #F5E6B8;
      --text-dim: #C4B599;
      --text-muted: #9C9270;

      /* 배경 & 표면 */
      --bg-primary: linear-gradient(135deg, #0D1B2A 0%, #00080D 50%, #001E35 100%);
      --bg-secondary: rgba(13, 27, 42, 0.95);
      --surface-1: rgba(21, 34, 56, 0.8);
      --surface-2: rgba(28, 45, 73, 0.6);
      --glass-1: rgba(220, 199, 162, 0.08);
      --glass-2: rgba(220, 199, 162, 0.12);
      --glass-subtle: rgba(220, 199, 162, 0.04);

      /* 보더 */
      --border-1: rgba(220, 199, 162, 0.25);
      --border-2: rgba(220, 199, 162, 0.4);
      --border-subtle: rgba(220, 199, 162, 0.15);

      /* 그림자 */
      --shadow-soft: 0 8px 32px rgba(0, 8, 13, 0.6);
      --shadow-medium: 0 16px 48px rgba(0, 8, 13, 0.8);
      --shadow-hard: 0 24px 64px rgba(0, 0, 0, 0.9);
      --shadow-inset: inset 0 2px 8px rgba(0, 8, 13, 0.3);
      --shadow-glow: 0 0 24px rgba(220, 199, 162, 0.15);
      --shadow-intense: 0 0 60px rgba(220, 199, 162, 0.3);

      /* 상태 색상 (네이비+골드 기반) */
      --success: #27AE60;
      --warning: #F39C12;
      --danger: #E74C3C;

      /* 블러 효과 */
      --blur-light: blur(12px);
      --blur-medium: blur(20px);
      --blur-heavy: blur(32px);

      /* 반지름 */
      --radius: 16px;
      --radius-small: 8px;
      --radius-large: 24px;

      /* 폰트 */
      --serif: 'Cinzel', serif;
      --sans: 'Inter', system-ui, sans-serif;

      /* 트랜지션 */
      --transition-fast: all 0.2s cubic-bezier(0.4, 0.0, 0.2, 1);
      --transition-normal: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
      --transition-slow: all 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    /* ===============================
       Base Reset & Typography
       =============================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      min-height: 100vh;
      font-family: var(--sans);
      background: var(--bg-primary);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      top: -50%;
      left: -50%;
      right: -50%;
      bottom: -50%;
      background: 
        radial-gradient(circle at 30% 20%, rgba(220, 199, 162, 0.08) 0%, transparent 40%),
        radial-gradient(circle at 70% 80%, rgba(220, 199, 162, 0.06) 0%, transparent 40%),
        radial-gradient(circle at 20% 60%, rgba(212, 183, 126, 0.04) 0%, transparent 40%);
      animation: cosmic-drift 20s ease-in-out infinite;
      z-index: -1;
    }

    /* ===============================
       Enhanced Header with Dramatic Effects
       =============================== */
    .header {
      position: relative;
      padding: 32px 0 40px;
      background: var(--bg-primary);
      backdrop-filter: var(--blur-heavy);
      border-bottom: 2px solid var(--border-1);
      box-shadow: var(--shadow-hard), var(--shadow-intense);
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      right: -50%;
      bottom: -50%;
      background: 
        radial-gradient(circle at 25% 25%, rgba(220, 199, 162, 0.1) 0%, transparent 30%),
        radial-gradient(circle at 75% 75%, rgba(220, 199, 162, 0.08) 0%, transparent 30%);
      animation: aurora-dance 15s ease-in-out infinite;
      z-index: 1;
    }

    .header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(220, 199, 162, 0.06) 50%, 
        transparent 70%);
      animation: energy-sweep 10s ease-in-out infinite;
      z-index: 2;
    }

    .header-content {
      position: relative;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 10;
    }

    /* Star Field for Player Page */
    .star-field {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 3;
    }

    .star {
      position: absolute;
      background: var(--gold-bright);
      border-radius: 50%;
      filter: blur(0.5px);
    }

    .star-1 { 
      top: 20%; left: 15%; 
      width: 2px; height: 2px;
      box-shadow: 0 0 15px var(--gold-bright), 0 0 30px rgba(220, 199, 162, 0.6);
      animation: star-pulse 4s ease-in-out infinite;
    }
    .star-2 { 
      top: 30%; right: 20%; 
      width: 1.5px; height: 1.5px;
      box-shadow: 0 0 12px var(--gold-dark), 0 0 25px rgba(212, 183, 126, 0.5);
      animation: star-pulse 3.5s ease-in-out infinite 1s;
    }
    .star-3 { 
      top: 60%; left: 25%; 
      width: 2.5px; height: 2.5px;
      box-shadow: 0 0 18px var(--gold-bright), 0 0 35px rgba(220, 199, 162, 0.7);
      animation: star-pulse 4.5s ease-in-out infinite 2s;
    }
    .star-4 { 
      top: 80%; right: 30%; 
      width: 1px; height: 1px;
      box-shadow: 0 0 10px var(--gold-muted), 0 0 20px rgba(181, 160, 130, 0.4);
      animation: star-pulse 3s ease-in-out infinite 0.5s;
    }

    /* Lens Flare for Player Page */
    .lens-flare {
      position: absolute;
      top: 25%;
      right: 10%;
      width: 250px;
      height: 250px;
      pointer-events: none;
      z-index: 4;
    }

    .lens-flare-core {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 25px;
      height: 25px;
      background: radial-gradient(circle, 
        rgba(255, 255, 255, 1) 0%,
        rgba(220, 199, 162, 0.9) 40%,
        transparent 100%);
      border-radius: 50%;
      box-shadow: 
        0 0 25px rgba(255, 255, 255, 0.9),
        0 0 50px rgba(220, 199, 162, 0.7),
        0 0 100px rgba(212, 183, 126, 0.5);
      animation: core-pulse 3s ease-in-out infinite;
    }

    .lens-flare-rays {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 220px;
      height: 220px;
    }

    .lens-flare-rays::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 2px;
      height: 220px;
      background: linear-gradient(to bottom,
        transparent 0%,
        rgba(255, 255, 255, 0.8) 30%,
        rgba(255, 255, 255, 1) 50%,
        rgba(255, 255, 255, 0.8) 70%,
        transparent 100%);
      box-shadow: 0 0 6px rgba(255, 255, 255, 0.7);
    }

    .lens-flare-rays::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(90deg);
      width: 2px;
      height: 220px;
      background: linear-gradient(to bottom,
        transparent 0%,
        rgba(255, 255, 255, 0.8) 30%,
        rgba(255, 255, 255, 1) 50%,
        rgba(255, 255, 255, 0.8) 70%,
        transparent 100%);
      box-shadow: 0 0 6px rgba(255, 255, 255, 0.7);
    }

    /* Plasma Orbs */
    .plasma-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(1px);
      animation: plasma-drift 6s ease-in-out infinite;
    }

    .orb-1 {
      top: 35%;
      right: 40%;
      width: 50px;
      height: 50px;
      background: radial-gradient(circle, 
        rgba(220, 199, 162, 0.4) 0%, 
        rgba(220, 199, 162, 0.2) 40%, 
        transparent 70%);
      animation-delay: 0s;
      box-shadow: 0 0 40px rgba(220, 199, 162, 0.3);
    }

    .orb-2 {
      top: 55%;
      right: 60%;
      width: 35px;
      height: 35px;
      background: radial-gradient(circle, 
        rgba(212, 183, 126, 0.3) 0%, 
        rgba(212, 183, 126, 0.15) 40%, 
        transparent 70%);
      animation-delay: 2s;
      box-shadow: 0 0 30px rgba(212, 183, 126, 0.2);
    }

    /* Brand Title */
    .brand-title {
      font-family: var(--serif);
      font-size: clamp(2rem, 4vw, 3rem);
      font-weight: 700;
      background: linear-gradient(135deg, 
        var(--gold-bright) 0%, 
        var(--gold-dark) 50%, 
        var(--gold-bright) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 20px rgba(220, 199, 162, 0.5);
      letter-spacing: 0.1em;
      position: relative;
      z-index: 10;
    }

    .brand-title::before {
      content: '✦';
      position: absolute;
      left: -40px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.5rem;
      color: var(--gold-bright);
      text-shadow: 0 0 15px var(--gold-bright);
      animation: star-rotate 5s ease-in-out infinite;
    }

    .brand-title::after {
      content: '✧';
      position: absolute;
      right: -40px;
      top: 20%;
      font-size: 1rem;
      color: var(--gold-dark);
      text-shadow: 0 0 10px var(--gold-dark);
      animation: star-rotate 5s ease-in-out infinite reverse 2.5s;
    }

    /* Connection Status */
    .connection-status {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      background: var(--glass-1);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius);
      backdrop-filter: var(--blur-light);
      z-index: 10;
    }

    .connection-dot {
      width: 12px;
      height: 12px;
      background: var(--warning);
      border-radius: 50%;
      box-shadow: 0 0 16px var(--warning);
      animation: pulse 2s ease-in-out infinite;
    }

    .connection-dot.connected {
      background: var(--success);
      box-shadow: 0 0 16px var(--success);
    }

    .connection-text {
      font-weight: 600;
      color: var(--text-dim);
      font-size: 14px;
    }

    /* ===============================
       Main Layout
       =============================== */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 32px 24px;
      display: grid;
      grid-template-columns: 300px 1fr 350px;
      gap: 32px;
      align-items: start;
    }

    /* ===============================
       Enhanced Card System
       =============================== */
    .card {
      background: var(--surface-1);
      border: 1px solid var(--border-1);
      border-radius: var(--radius);
      padding: 28px;
      position: relative;
      overflow: hidden;
      transition: var(--transition-normal);
      backdrop-filter: var(--blur-light);
      box-shadow: var(--shadow-soft), var(--shadow-inset);
      margin-bottom: 24px;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 20%;
      right: 20%;
      height: 1px;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(220, 199, 162, 0.4), 
        transparent);
    }

    .card:hover {
      transform: translateY(-4px);
      border-color: var(--border-2);
      box-shadow: var(--shadow-medium), 
                  var(--shadow-inset), 
                  0 0 40px rgba(220, 199, 162, 0.1);
    }

    /* Section Headers */
    .section-header {
      margin-bottom: 24px;
    }

    .section-title {
      font-family: var(--serif);
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--gold-bright);
      position: relative;
      padding-left: 24px;
      letter-spacing: 0.02em;
      text-shadow: 0 2px 8px rgba(220, 199, 162, 0.3);
    }

    .section-title::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 6px;
      height: 70%;
      background: linear-gradient(to bottom, 
        var(--gold-bright), 
        var(--gold-dark));
      border-radius: 3px;
      box-shadow: 0 0 10px rgba(220, 199, 162, 0.4);
    }

    /* ===============================
       Authentication Section
       =============================== */
    #authSection {
      grid-column: 1 / -1;
      max-width: 600px;
      justify-self: center;
    }

    .field {
      margin-bottom: 24px;
    }

    .field label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-dim);
      font-size: 14px;
      letter-spacing: 0.02em;
    }

    .input {
      width: 100%;
      padding: 16px 20px;
      background: var(--surface-2);
      border: 2px solid var(--border-subtle);
      border-radius: var(--radius);
      color: var(--text);
      font-size: 16px;
      font-weight: 500;
      transition: var(--transition-normal);
      backdrop-filter: var(--blur-light);
    }

    .input:focus {
      outline: none;
      border-color: var(--gold-bright);
      background: rgba(28, 45, 73, 0.8);
      box-shadow: 0 0 0 4px rgba(220, 199, 162, 0.15),
                  0 0 20px rgba(220, 199, 162, 0.1);
    }

    /* ===============================
       Enhanced Button System
       =============================== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 16px 24px;
      border: none;
      border-radius: var(--radius);
      font-family: var(--sans);
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition-normal);
      position: relative;
      overflow: hidden;
      text-decoration: none;
      letter-spacing: 0.02em;
      min-width: 140px;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.2), 
        transparent);
      transition: left 0.6s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-gold {
      background: linear-gradient(135deg, var(--gold-bright), var(--gold-dark));
      color: var(--deep-navy);
      box-shadow: 0 4px 16px rgba(220, 199, 162, 0.3);
    }

    .btn-gold:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 8px 24px rgba(220, 199, 162, 0.4);
    }

    .btn-attack {
      background: linear-gradient(135deg, #E74C3C, #C0392B);
      color: white;
    }

    .btn-defend {
      background: linear-gradient(135deg, #3498DB, #2980B9);
      color: white;
    }

    .btn-dodge {
      background: linear-gradient(135deg, #F39C12, #E67E22);
      color: white;
    }

    .btn-item {
      background: linear-gradient(135deg, #9B59B6, #8E44AD);
      color: white;
    }

    .btn-pass {
      background: linear-gradient(135deg, #95A5A6, #7F8C8D);
      color: white;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }

    /* ===============================
       Player Info Panel
       =============================== */
    .player-info-panel {
      display: grid;
      gap: 16px;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    .info-item {
      text-align: center;
      padding: 16px;
      background: var(--glass-1);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-small);
      backdrop-filter: var(--blur-light);
    }

    .info-label {
      font-size: 12px;
      color: var(--text-muted);
      font-weight: 600;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .info-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--gold-bright);
    }

    .info-value.hp {
      color: var(--success);
    }

    .info-value.low-hp {
      color: var(--danger);
      animation: danger-pulse 2s ease-in-out infinite;
    }

    /* ===============================
       Team Members Panel
       =============================== */
    .team-member {
      display: grid;
      grid-template-columns: 48px 1fr;
      gap: 12px;
      align-items: center;
      padding: 16px;
      background: var(--glass-1);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-small);
      margin-bottom: 12px;
      transition: var(--transition-normal);
    }

    .team-member:hover {
      background: var(--glass-2);
      border-color: var(--border-1);
    }

    .member-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--gold-bright), var(--gold-dark));
      border: 2px solid var(--border-1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: var(--deep-navy);
      box-shadow: 0 4px 12px rgba(220, 199, 162, 0.2);
    }

    .member-info {
      flex: 1;
    }

    .member-name {
      font-weight: 700;
      color: var(--text);
      font-size: 14px;
      margin-bottom: 4px;
    }

    .member-status {
      font-size: 12px;
      color: var(--text-dim);
      display: flex;
      gap: 8px;
    }

    /* ===============================
       Action Panel
       =============================== */
    .action-panel {
      position: sticky;
      top: 20px;
    }

    .action-buttons {
      display: grid;
      gap: 12px;
    }

    .turn-indicator {
      text-align: center;
      padding: 16px;
      background: var(--glass-2);
      border: 1px solid var(--border-1);
      border-radius: var(--radius);
      margin-bottom: 20px;
      backdrop-filter: var(--blur-light);
    }

    .turn-indicator.active {
      background: linear-gradient(135deg, 
        rgba(220, 199, 162, 0.2), 
        rgba(220, 199, 162, 0.1));
      border-color: var(--gold-bright);
      box-shadow: 0 0 20px rgba(220, 199, 162, 0.3);
    }

    .turn-text {
      font-weight: 700;
      color: var(--gold-bright);
      font-size: 16px;
    }

    /* ===============================
       Battle Log
       =============================== */
    .battle-log {
      height: 300px;
      background: linear-gradient(145deg, 
        rgba(13, 27, 42, 0.95), 
        rgba(21, 34, 56, 0.92));
      border: 1px solid var(--border-1);
      border-radius: var(--radius);
      padding: 20px;
      overflow-y: auto;
      backdrop-filter: var(--blur-light);
      box-shadow: inset 0 4px 16px rgba(0, 8, 13, 0.3);
    }

    .log-entry {
      padding: 8px 12px;
      margin-bottom: 8px;
      border-radius: var(--radius-small);
      font-size: 13px;
      background: rgba(220, 199, 162, 0.05);
      border-left: 3px solid transparent;
    }

    .log-entry.system {
      color: var(--gold-bright);
      border-left-color: var(--gold-bright);
    }

    .log-entry.action {
      color: var(--text);
      border-left-color: var(--text-dim);
    }

    .log-entry.damage {
      color: var(--danger);
      border-left-color: var(--danger);
    }

    .log-entry.heal {
      color: var(--success);
      border-left-color: var(--success);
    }

    /* ===============================
       Responsive Design
       =============================== */
    @media (max-width: 1200px) {
      .container {
        grid-template-columns: 1fr;
        gap: 24px;
      }

      .action-panel {
        position: static;
      }
    }

    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 16px;
        text-align: center;
      }

      .container {
        padding: 20px 16px;
      }

      .card {
        padding: 20px 16px;
      }

      .info-grid {
        grid-template-columns: 1fr;
      }

      .action-buttons {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 480px) {
      .brand-title::before,
      .brand-title::after {
        display: none;
      }

      .action-buttons {
        grid-template-columns: 1fr;
      }
    }

    /* ===============================
       Animations
       =============================== */
    @keyframes star-pulse {
      0%, 100% { 
        opacity: 0.4; 
        transform: scale(1);
      }
      50% { 
        opacity: 1; 
        transform: scale(1.5);
      }
    }

    @keyframes core-pulse {
      0%, 100% { 
        opacity: 0.8; 
        transform: translate(-50%, -50%) scale(1);
      }
      50% { 
        opacity: 1; 
        transform: translate(-50%, -50%) scale(1.2);
      }
    }

    @keyframes plasma-drift {
      0%, 100% { 
        opacity: 0.4; 
        transform: translateY(0px);
      }
      50% { 
        opacity: 0.8; 
        transform: translateY(-10px);
      }
    }

    @keyframes aurora-dance {
      0%, 100% { 
        transform: rotate(0deg) scale(1); 
        opacity: 0.6;
      }
      50% { 
        transform: rotate(180deg) scale(1.1); 
        opacity: 0.8;
      }
    }

    @keyframes energy-sweep {
      0% { transform: translateX(-100%) skewX(-15deg); }
      100% { transform: translateX(100%) skewX(-15deg); }
    }

    @keyframes star-rotate {
      0%, 100% { 
        transform: translateY(-50%) rotate(0deg); 
        opacity: 0.8;
      }
      50% { 
        transform: translateY(-50%) rotate(180deg); 
        opacity: 1;
      }
    }

    @keyframes cosmic-drift {
      0%, 100% { 
        transform: rotate(0deg) scale(1); 
        opacity: 0.5;
      }
      33% { 
        transform: rotate(120deg) scale(1.05); 
        opacity: 0.7;
      }
      66% { 
        transform: rotate(240deg) scale(0.95); 
        opacity: 0.6;
      }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }

    @keyframes danger-pulse {
      0%, 100% { color: var(--danger); }
      50% { color: #FF6B6B; }
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--surface-2);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, var(--gold-bright), var(--gold-dark));
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, var(--gold-dark), var(--gold-bright));
    }
  </style>
</head>
<body>
  <!-- Enhanced Header with Dramatic Effects -->
  <header class="header">
    <div class="star-field">
      <div class="star star-1"></div>
      <div class="star star-2"></div>
      <div class="star star-3"></div>
      <div class="star star-4"></div>
    </div>
    
    <div class="lens-flare">
      <div class="lens-flare-core"></div>
      <div class="lens-flare-rays"></div>
      <div class="plasma-orb orb-1"></div>
      <div class="plasma-orb orb-2"></div>
    </div>
    
    <div class="header-content">
      <div class="brand-logo">
        <h1 class="brand-title">PYXIS</h1>
      </div>
      <div class="connection-status">
        <div class="connection-dot" id="connectionDot"></div>
        <span class="connection-text" id="connectionText">연결 중...</span>
      </div>
    </div>
  </header>

  <!-- Main Container -->
  <div class="container">
    <!-- Authentication Section -->
    <div id="authSection" class="card">
      <div class="section-header">
        <h2 class="section-title">플레이어 인증</h2>
      </div>
      <form id="authForm">
        <div class="field">
          <label for="playerName">플레이어 이름</label>
          <input type="text" id="playerName" class="input" placeholder="플레이어 이름을 입력하세요" required />
        </div>
        <div class="field">
          <label for="playerToken">플레이어 OTP</label>
          <input type="text" id="playerToken" class="input" placeholder="발급받은 OTP를 입력하세요" required />
        </div>
        <button type="submit" class="btn btn-gold">전투 참여</button>
      </form>
    </div>

    <!-- Game Interface (Hidden initially) -->
    <div id="gameInterface" style="display: none;">
      <!-- Left Column: Team Info -->
      <div class="team-column">
        <!-- My Info -->
        <div class="card">
          <div class="section-header">
            <h2 class="section-title">내 정보</h2>
          </div>
          <div class="player-info-panel">
            <div class="info-grid">
              <div class="info-item">
                <div class="info-label">이름</div>
                <div class="info-value" id="myPlayerName">-</div>
              </div>
              <div class="info-item">
                <div class="info-label">팀</div>
                <div class="info-value" id="myPlayerTeam">-</div>
              </div>
              <div class="info-item">
                <div class="info-label">HP</div>
                <div class="info-value hp" id="myPlayerHp">100/100</div>
              </div>
              <div class="info-item">
                <div class="info-label">상태</div>
                <div class="info-value" id="myPlayerStatus">대기 중</div>
              </div>
            </div>
            
            <div class="info-grid">
              <div class="info-item">
                <div class="info-label">공격</div>
                <div class="info-value" id="statAttack">-</div>
              </div>
              <div class="info-item">
                <div class="info-label">방어</div>
                <div class="info-value" id="statDefense">-</div>
              </div>
              <div class="info-item">
                <div class="info-label">민첩</div>
                <div class="info-value" id="statAgility">-</div>
              </div>
              <div class="info-item">
                <div class="info-label">행운</div>
                <div class="info-value" id="statLuck">-</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Team Members -->
        <div class="card">
          <div class="section-header">
            <h2 class="section-title">팀원 정보</h2>
          </div>
          <div id="teamMembers">
            <!-- Team members will be populated here -->
          </div>
        </div>
      </div>

      <!-- Center Column: Battle Area -->
      <div class="battle-column">
        <!-- Turn Info -->
        <div class="card">
          <div class="turn-indicator" id="turnIndicator">
            <div class="turn-text" id="turnText">전투 대기 중...</div>
          </div>
        </div>

        <!-- Battle Log -->
        <div class="card">
          <div class="section-header">
            <h2 class="section-title">전투 로그</h2>
          </div>
          <div class="battle-log" id="battleLog">
            <div class="log-entry system">전투 시스템에 연결되었습니다.</div>
          </div>
        </div>

        <!-- Target Selection (Hidden initially) -->
        <div id="targetSelection" class="card" style="display: none;">
          <div class="section-header">
            <h2 class="section-title">대상 선택</h2>
          </div>
          <div id="targetList">
            <!-- Targets will be populated here -->
          </div>
        </div>
      </div>

      <!-- Right Column: Action Panel -->
      <div class="action-column">
        <div class="action-panel">
          <div class="card">
            <div class="section-header">
              <h2 class="section-title">액션 선택</h2>
            </div>
            <div class="action-buttons">
              <button id="actionAttack" class="btn btn-attack" disabled>
                공격
              </button>
              <button id="actionDefend" class="btn btn-defend" disabled>
                방어
              </button>
              <button id="actionDodge" class="btn btn-dodge" disabled>
                회피
              </button>
              <button id="actionItem" class="btn btn-item" disabled>
                아이템
              </button>
              <button id="actionPass" class="btn btn-pass" disabled>
                패스
              </button>
            </div>
          </div>

          <!-- Items Panel -->
          <div class="card">
            <div class="section-header">
              <h2 class="section-title">보유 아이템</h2>
            </div>
            <div id="itemsList">
              <!-- Items will be populated here -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript Implementation -->
  <script>
    // PYXIS Player System Implementation
    class PyxisPlayer {
      constructor() {
        this.socket = null;
        this.playerData = null;
        this.battleData = null;
        this.isAuthenticated = false;
        this.currentTurn = false;
        this.selectedAction = null;
        this.selectedTarget = null;
        this.battleTimer = null;
        this.turnTimer = null;

        this.init();
      }

      init() {
        console.log('[PYXIS Player] Initializing...');
        this.setupEventListeners();
        this.checkUrlParams();
        this.updateConnectionStatus('connecting', '연결 중...');
      }

      setupEventListeners() {
        // Authentication form
        const authForm = document.getElementById('authForm');
        if (authForm) {
          authForm.addEventListener('submit', (e) => {
            e.preventDefault();
            this.authenticatePlayer();
          });
        }

        // Action buttons
        const actions = ['attack', 'defend', 'dodge', 'item', 'pass'];
        actions.forEach(action => {
          const btn = document.getElementById(`action${action.charAt(0).toUpperCase() + action.slice(1)}`);
          if (btn) {
            btn.addEventListener('click', () => this.selectAction(action));
          }
        });
      }

      checkUrlParams() {
        const params = new URLSearchParams(window.location.search);
        const name = params.get('name');
        const token = params.get('token');
        const battleId = params.get('battleId');

        if (name && token && battleId) {
          document.getElementById('playerName').value = decodeURIComponent(name);
          document.getElementById('playerToken').value = token;
          // 자동 인증 실행
          setTimeout(() => {
            this.authenticatePlayer();
          }, 500);
        }
      }

      async authenticatePlayer() {
        try {
          const name = document.getElementById('playerName').value.trim();
          const token = document.getElementById('playerToken').value.trim();
          
          if (!name || !token) {
            this.addLog('system', '이름과 OTP를 모두 입력해주세요');
            return;
          }

          this.addLog('system', '인증 중...');
          
          // Simulate authentication
          await this.delay(1000);
          
          this.playerData = {
            id: this.generateId(),
            name: name,
            team: Math.random() > 0.5 ? 'phoenix' : 'death-eater',
            stats: {
              attack: Math.floor(Math.random() * 5) + 1,
              defense: Math.floor(Math.random() * 5) + 1,
              agility: Math.floor(Math.random() * 5) + 1,
              luck: Math.floor(Math.random() * 5) + 1
            },
            hp: 100,
            maxHp: 100,
            items: {
              dittany: 1,
              attackBoost: 1,
              defenseBoost: 1
            }
          };

          this.isAuthenticated = true;
          this.showGameInterface();
          this.updateConnectionStatus('connected', '연결됨');
          this.addLog('system', `${name}님이 전투에 참여했습니다!`);
          this.startBattleTimer();

          // 5초 후 첫 턴 시뮬레이션
          setTimeout(() => {
            if (this.isAuthenticated) {
              this.simulateMyTurn();
            }
          }, 5000);

        } catch (error) {
          console.error('[PYXIS Player] Auth error:', error);
          this.addLog('system', '인증 실패: ' + error.message);
        }
      }

      showGameInterface() {
        document.getElementById('authSection').style.display = 'none';
        document.getElementById('gameInterface').style.display = 'grid';
        
        this.updatePlayerInfo();
        this.updateTeamMembers();
        this.updateItemsList();
      }

      updatePlayerInfo() {
        if (!this.playerData) return;

        document.getElementById('myPlayerName').textContent = this.playerData.name;
        document.getElementById('myPlayerTeam').textContent = 
          this.playerData.team === 'phoenix' ? '불사조 기사단' : '죽음을 먹는 자들';
        document.getElementById('myPlayerHp').textContent = 
          `${this.playerData.hp}/${this.playerData.maxHp}`;
        document.getElementById('myPlayerStatus').textContent = '준비됨';

        document.getElementById('statAttack').textContent = this.playerData.stats.attack;
        document.getElementById('statDefense').textContent = this.playerData.stats.defense;
        document.getElementById('statAgility').textContent = this.playerData.stats.agility;
        document.getElementById('statLuck').textContent = this.playerData.stats.luck;

        // Update HP color based on health
        const hpElement = document.getElementById('myPlayerHp');
        if (this.playerData.hp <= 30) {
          hpElement.classList.add('low-hp');
        } else {
          hpElement.classList.remove('low-hp');
        }
      }

      updateTeamMembers() {
        const teamMembers = document.getElementById('teamMembers');
        if (!teamMembers) return;

        // Sample team members (same team as player)
        const members = [
          { name: '팀원1', hp: 85, maxHp: 100, status: '준비됨' },
          { name: '팀원2', hp: 100, maxHp: 100, status: '대기 중' }
        ];

        teamMembers.innerHTML = '';
        members.forEach(member => {
          const memberElement = document.createElement('div');
          memberElement.className = 'team-member';
          memberElement.innerHTML = `
            <div class="member-avatar">${member.name.charAt(0)}</div>
            <div class="member-info">
              <div class="member-name">${member.name}</div>
              <div class="member-status">
                HP: ${member.hp}/${member.maxHp} | ${member.status}
              </div>
            </div>
          `;
          teamMembers.appendChild(memberElement);
        });
      }

      updateItemsList() {
        const itemsList = document.getElementById('itemsList');
        if (!itemsList || !this.playerData) return;

        const items = [
          { name: '디터니', count: this.playerData.items.dittany, icon: '디터니' },
          { name: '공격 보정기', count: this.playerData.items.attackBoost, icon: '공격 보정기' },
          { name: '방어 보정기', count: this.playerData.items.defenseBoost, icon: '방어 보정기' }
        ];

        itemsList.innerHTML = '';
        items.forEach(item => {
          if (item.count > 0) {
            const itemElement = document.createElement('div');
            itemElement.className = 'info-item';
            itemElement.innerHTML = `
              <div class="info-label">${item.icon} ${item.name}</div>
              <div class="info-value">${item.count}개</div>
            `;
            itemsList.appendChild(itemElement);
          }
        });
      }

      startBattleTimer() {
        // 전투 제한 시간: 1시간 (3600초)
        let remainingTime = 3600;
        
        this.battleTimer = setInterval(() => {
          remainingTime--;
          
          if (remainingTime <= 0) {
            this.addLog('system', '전투 시간이 종료되었습니다!');
            clearInterval(this.battleTimer);
            this.endBattle();
          }
        }, 1000);
      }

      simulateMyTurn() {
        this.currentTurn = true;
        this.setActionButtonsEnabled(true);
        this.updateTurnIndicator(true, '당신의 턴입니다!');
        this.addLog('system', '당신의 턴입니다! 액션을 선택하세요.');
        
        // 5분 자동 패스 타이머
        this.startTurnTimer();
      }

      startTurnTimer() {
        let turnTime = 300; // 5분 = 300초
        
        this.turnTimer = setInterval(() => {
          turnTime--;
          
          if (turnTime <= 0) {
            this.addLog('system', '시간 초과로 자동 패스됩니다.');
            this.selectAction('pass');
            clearInterval(this.turnTimer);
          }
        }, 1000);
      }

      selectAction(action) {
        if (!this.currentTurn) {
          this.addLog('system', '당신의 턴이 아닙니다');
          return;
        }

        // 턴 타이머 정리
        if (this.turnTimer) {
          clearInterval(this.turnTimer);
          this.turnTimer = null;
        }

        this.selectedAction = action;
        this.addLog('action', `${this.getActionName(action)}을(를) 선택했습니다`);

        if (action === 'attack') {
          this.showTargetSelection();
        } else {
          this.executeAction();
        }
      }

      showTargetSelection() {
        const targetSelection = document.getElementById('targetSelection');
        const targetList = document.getElementById('targetList');
        
        if (!targetSelection || !targetList) return;

        // Sample enemy targets
        const enemies = [
          { id: 'enemy1', name: '적 플레이어1', hp: 75, maxHp: 100 },
          { id: 'enemy2', name: '적 플레이어2', hp: 90, maxHp: 100 }
        ];

        targetList.innerHTML = '';
        enemies.forEach(enemy => {
          const targetBtn = document.createElement('button');
          targetBtn.className = 'btn btn-attack';
          targetBtn.style.marginBottom = '8px';
          targetBtn.innerHTML = `${enemy.name} (${enemy.hp}/${enemy.maxHp} HP)`;
          targetBtn.addEventListener('click', () => {
            this.selectedTarget = enemy.id;
            this.executeAction();
            targetSelection.style.display = 'none';
          });
          targetList.appendChild(targetBtn);
        });

        targetSelection.style.display = 'block';
      }

      executeAction() {
        if (!this.selectedAction) return;

        const actionName = this.getActionName(this.selectedAction);
        this.addLog('action', `${actionName}을(를) 실행합니다!`);

        // Simulate action execution with game mechanics
        this.simulateActionResult();
        
        // Disable action buttons
        this.setActionButtonsEnabled(false);
        this.currentTurn = false;
        
        this.updateTurnIndicator(false, '상대 턴');
        
        // Reset selections
        this.selectedAction = null;
        this.selectedTarget = null;

        // Simulate next turn after delay
        setTimeout(() => {
          this.simulateOpponentTurn();
        }, 3000);
      }

      simulateActionResult() {
        const action = this.selectedAction;
        let resultMessage = '';

        switch(action) {
          case 'attack':
            const attackRoll = Math.floor(Math.random() * 20) + 1;
            const totalAttack = this.playerData.stats.attack + attackRoll;
            const damage = Math.max(1, totalAttack - 3); // 가정: 적 방어력 3
            
            // 치명타 체크
            const criticalChance = 20 - Math.floor(this.playerData.stats.luck / 2);
            const isCritical = attackRoll >= criticalChance;
            const finalDamage = isCritical ? damage * 2 : damage;
            
            resultMessage = `공격 성공! ${isCritical ? '치명타! ' : ''}${finalDamage} 데미지를 가했습니다! (주사위: ${attackRoll})`;
            break;
            
          case 'defend':
            resultMessage = '방어 자세를 취했습니다! 받는 데미지가 감소합니다.';
            break;
            
          case 'dodge':
            const dodgeRoll = Math.floor(Math.random() * 20) + 1;
            const dodgeSuccess = (this.playerData.stats.agility + dodgeRoll) >= 15;
            resultMessage = dodgeSuccess ? 
              `회피 성공! (주사위: ${dodgeRoll})` : 
              `회피 실패... (주사위: ${dodgeRoll})`;
            break;
            
          case 'item':
            resultMessage = '디터니를 사용했습니다! HP가 10 회복됩니다.';
            this.playerData.hp = Math.min(this.playerData.maxHp, this.playerData.hp + 10);
            this.playerData.items.dittany = Math.max(0, this.playerData.items.dittany - 1);
            this.updatePlayerInfo();
            this.updateItemsList();
            break;
            
          case 'pass':
            resultMessage = '턴을 패스합니다.';
            break;
        }

        this.addLog(action === 'attack' && resultMessage.includes('치명타') ? 'damage' : 'action', resultMessage);
      }

      simulateOpponentTurn() {
        this.addLog('system', '상대방이 행동 중입니다...');
        
        setTimeout(() => {
          const opponentActions = ['공격', '방어', '회피', '아이템 사용'];
          const randomAction = opponentActions[Math.floor(Math.random() * opponentActions.length)];
          
          this.addLog('action', `상대방이 ${randomAction}을(를) 선택했습니다.`);
          
          // Simulate opponent result
          if (randomAction === '공격') {
            const damage = Math.floor(Math.random() * 15) + 5;
            this.playerData.hp = Math.max(0, this.playerData.hp - damage);
            this.addLog('damage', `당신이 ${damage} 데미지를 받았습니다! (HP: ${this.playerData.hp}/${this.playerData.maxHp})`);
            this.updatePlayerInfo();
            
            if (this.playerData.hp <= 0) {
              this.addLog('system', '전투에서 패배했습니다...');
              this.endBattle();
              return;
            }
          }
          
          // Start next turn
          setTimeout(() => {
            if (this.isAuthenticated) {
              this.simulateMyTurn();
            }
          }, 2000);
          
        }, 2000);
      }

      endBattle() {
        this.setActionButtonsEnabled(false);
        this.currentTurn = false;
        this.updateTurnIndicator(false, '전투 종료');
        
        if (this.battleTimer) {
          clearInterval(this.battleTimer);
          this.battleTimer = null;
        }
        
        if (this.turnTimer) {
          clearInterval(this.turnTimer);
          this.turnTimer = null;
        }
      }

      setActionButtonsEnabled(enabled) {
        const actions = ['attack', 'defend', 'dodge', 'item', 'pass'];
        actions.forEach(action => {
          const btn = document.getElementById(`action${action.charAt(0).toUpperCase() + action.slice(1)}`);
          if (btn) {
            btn.disabled = !enabled;
          }
        });
      }

      updateTurnIndicator(isMyTurn, text) {
        const indicator = document.getElementById('turnIndicator');
        const turnText = document.getElementById('turnText');
        
        if (indicator && turnText) {
          turnText.textContent = text;
          if (isMyTurn) {
            indicator.classList.add('active');
          } else {
            indicator.classList.remove('active');
          }
        }
      }

      updateConnectionStatus(status, text) {
        const dot = document.getElementById('connectionDot');
        const statusText = document.getElementById('connectionText');
        
        if (dot && statusText) {
          statusText.textContent = text;
          
          if (status === 'connected') {
            dot.classList.add('connected');
          } else {
            dot.classList.remove('connected');
          }
        }
      }

      getActionName(action) {
        const names = {
          attack: '공격',
          defend: '방어', 
          dodge: '회피',
          item: '아이템 사용',
          pass: '패스'
        };
        return names[action] || action;
      }

      addLog(type, message) {
        const logViewer = document.getElementById('battleLog');
        if (!logViewer) return;
        
        const logEntry = document.createElement('div');
        logEntry.className = `log-entry ${type}`;
        logEntry.innerHTML = `<span class="log-time">${this.getTimeString()}</span> ${message}`;
        
        logViewer.appendChild(logEntry);
        logViewer.scrollTop = logViewer.scrollHeight;

        // 로그 최대 개수 제한
        const entries = logViewer.querySelectorAll('.log-entry');
        if (entries.length > 100) {
          entries[0].remove();
        }
      }

      getTimeString() {
        return new Date().toLocaleTimeString('ko-KR', { 
          hour: '2-digit', 
          minute: '2-digit', 
          second: '2-digit' 
        });
      }

      generateId() {
        return Math.random().toString(36).substr(2, 8).toUpperCase();
      }

      delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }

      // 정리
      cleanup() {
        if (this.battleTimer) {
          clearInterval(this.battleTimer);
        }
        if (this.turnTimer) {
          clearInterval(this.turnTimer);
        }
      }
    }

    // Initialize player system
    const player = new PyxisPlayer();

    // Global cleanup
    window.addEventListener('beforeunload', () => {
      player.cleanup();
    });

    // Event listeners
    document.addEventListener('DOMContentLoaded', () => {
      console.log('[PYXIS Player] System loaded successfully');
    });
  </script>
</body>
</html>
