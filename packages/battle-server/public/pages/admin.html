<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PYXIS 관리자</title>
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
    
    <!-- 폰트 -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- 스타일시트 -->
    <link href="/assets/css/core.css" rel="stylesheet">
    <link href="/assets/css/components.css" rel="stylesheet">
    <link href="/assets/css/admin.css" rel="stylesheet">
</head>
<body>
    <!-- 헤더 -->
    <header class="admin-header twinkle-bg">
        <div class="wrap">
            <div class="admin-brand sparkle-effect">Pyxis</div>
        </div>
    </header>

    <!-- 메인 콘텐츠 -->
    <main class="wrap admin-stage">
        <!-- 전투 제어 섹션 -->
        <section class="card glow-effect" id="battleControlSection">
            <div class="section-header">
                <div class="section-title">전투 생성 및 제어</div>
                <div class="status-indicator">
                    <div class="status-dot" id="statusDot"></div>
                    <span id="statusText">대기중</span>
                </div>
            </div>
            
            <div class="control-grid" id="controlGrid">
                <!-- 전투 생성 폼 -->
                <form id="battleCreateForm" class="battle-create-form">
                    <div class="control-row">
                        <div class="field">
                            <label for="battleMode">전투 모드</label>
                            <select id="battleMode" class="select enhance-hover" required>
                                <option value="1v1">1 vs 1 - 개인전</option>
                                <option value="2v2">2 vs 2 - 소규모팀</option>
                                <option value="3v3">3 vs 3 - 팀전투</option>
                                <option value="4v4">4 vs 4 - 대규모전</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-gold enhance-hover">전투 생성</button>
                    </div>
                </form>

                <!-- 전투 정보 -->
                <div class="battle-info" id="battleInfo" style="display: none;">
                    <div class="field">
                        <label>전투 ID</label>
                        <div class="info-display" id="battleIdDisplay">-</div>
                    </div>
                    <div class="row">
                        <div class="field">
                            <label>관리자 OTP</label>
                            <div class="info-display" id="adminOtpDisplay">-</div>
                        </div>
                        <div class="field">
                            <label>관전자 OTP</label>
                            <div class="info-display" id="spectatorOtpDisplay">-</div>
                        </div>
                    </div>
                </div>

                <!-- 제어 버튼 -->
                <div class="control-actions" id="controlActions" style="display: none;">
                    <button id="btnConnect" class="btn enhance-hover">관리자 로그인</button>
                    <button id="btnStartBattle" class="btn btn-success enhance-hover">전투 시작</button>
                    <button id="btnPauseBattle" class="btn enhance-hover">일시정지</button>
                    <button id="btnEndBattle" class="btn btn-danger enhance-hover">전투 종료</button>
                </div>

                <!-- 링크 생성 -->
                <div class="links-section" id="linksSection" style="display: none;">
                    <div class="section-title">참여자 링크</div>
                    <div id="linksList"></div>
                    <button id="btnGenerateLinks" class="btn enhance-hover">플레이어별 링크 생성</button>
                </div>
            </div>
        </section>

        <!-- 실시간 로그 섹션 -->
        <section class="card glow-effect">
            <div class="section-header">
                <div class="section-title">실시간 로그 · 채팅</div>
            </div>
            
            <div class="log-chat-container">
                <div id="logViewer" class="log-viewer" aria-label="전투 로그"></div>
                
                <div class="chat-input-container">
                    <select id="chatChannel" class="select">
                        <option value="all">전체 채팅</option>
                        <option value="team">팀 채팅</option>
                    </select>
                    <input id="chatInput" class="input" placeholder="메시지 입력 (/t 팀 채팅)" maxlength="200">
                    <button id="btnSendChat" class="btn enhance-hover">전송</button>
                </div>
            </div>
        </section>

        <!-- 참여자 관리 섹션 -->
        <section class="card glow-effect">
            <div class="section-header">
                <div class="section-title">참여자 관리</div>
            </div>
            
            <!-- 플레이어 추가 폼 -->
            <form id="playerAddForm" class="player-add-form">
                <div class="roster-form">
                    <div class="field">
                        <label for="playerName">플레이어 이름</label>
                        <input id="playerName" class="input" placeholder="이름 입력" maxlength="20" required>
                    </div>
                    
                    <div class="field">
                        <label for="playerTeam">소속 팀</label>
                        <select id="playerTeam" class="select" required>
                            <option value="A">불사조 기사단</option>
                            <option value="B">죽음을 먹는 자들</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-gold enhance-hover">플레이어 추가</button>
                </div>

                <!-- 스탯 설정 -->
                <div class="field">
                    <label>능력치 배분 (1-5점)</label>
                    <div class="stats-grid">
                        <div class="field">
                            <label for="statAttack">공격력</label>
                            <input id="statAttack" class="input" type="number" value="3" min="1" max="5">
                        </div>
                        <div class="field">
                            <label for="statDefense">방어력</label>
                            <input id="statDefense" class="input" type="number" value="3" min="1" max="5">
                        </div>
                        <div class="field">
                            <label for="statAgility">민첩성</label>
                            <input id="statAgility" class="input" type="number" value="3" min="1" max="5">
                        </div>
                        <div class="field">
                            <label for="statLuck">행운</label>
                            <input id="statLuck" class="input" type="number" value="3" min="1" max="5">
                        </div>
                    </div>
                </div>

                <!-- 아이템 설정 -->
                <div class="field">
                    <label>시작 아이템 (0-9개)</label>
                    <div class="items-grid">
                        <div class="field">
                            <label for="itemHealing">디터니 (회복)</label>
                            <input id="itemHealing" class="input" type="number" value="0" min="0" max="9">
                        </div>
                        <div class="field">
                            <label for="itemAttackBoost">공격 보정기</label>
                            <input id="itemAttackBoost" class="input" type="number" value="0" min="0" max="9">
                        </div>
                        <div class="field">
                            <label for="itemDefenseBoost">방어 보정기</label>
                            <input id="itemDefenseBoost" class="input" type="number" value="0" min="0" max="9">
                        </div>
                    </div>
                </div>
            </form>

            <!-- 현재 로스터 -->
            <div class="roster-display">
                <div class="section-title">현재 로스터</div>
                <div class="teams-roster">
                    <div class="team-section">
                        <div class="team-header">불사조 기사단</div>
                        <div id="team1Roster" class="team-roster"></div>
                    </div>
                    
                    <div class="team-section">
                        <div class="team-header death-eater">죽음을 먹는 자들</div>
                        <div id="team2Roster" class="team-roster"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 스크립트 -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/assets/js/core/socket-manager.js"></script>
    <script src="/assets/js/core/ui-helpers.js"></script>
    <script src="/assets/js/components/chat.js"></script>
    <script src="/assets/js/components/player-card.js"></script>
    <script src="/assets/js/pages/admin.js"></script>
</body>
</html>
