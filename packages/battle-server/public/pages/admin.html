<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>PYXIS 관리자</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #0a0f1a;
      color: #f5f5f5;
    }
    header {
      background: #111827;
      padding: 12px 20px;
      border-bottom: 1px solid #333;
    }
    header h1 {
      font-family: 'Cinzel', serif;
      font-size: 20px;
      margin: 0;
      color: #d4b77e;
    }
    main {
      display: flex;
      gap: 16px;
      padding: 16px;
    }
    section {
      flex: 1;
      background: #1a1f2b;
      border-radius: 8px;
      padding: 12px;
    }
    h2, h3 {
      margin-top: 0;
      color: #d4b77e;
    }
    input, select, button {
      margin: 4px 0;
      padding: 6px 8px;
      border: none;
      border-radius: 4px;
    }
    button {
      background: #d4b77e;
      color: #111;
      cursor: pointer;
    }
    #battleLog, #chatView {
      background: #0f1419;
      padding: 8px;
      border-radius: 6px;
      height: 200px;
      overflow-y: auto;
      font-size: 14px;
    }
    .roster-player {
      padding: 4px;
      margin-bottom: 2px;
      background: #2a2f3a;
      border-radius: 4px;
    }
    .chat-entry {
      padding: 2px 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>PYXIS 관리자 페이지</h1>
  </header>
  <main>
    <!-- 왼쪽 패널: 전투 제어 -->
    <section>
      <h2>전투 제어</h2>
      <label for="battleMode">전투 모드:</label>
      <select id="battleMode">
        <option value="1v1">1 vs 1</option>
        <option value="2v2">2 vs 2</option>
        <option value="3v3">3 vs 3</option>
        <option value="4v4">4 vs 4</option>
      </select>
      <br />
      <button id="btnCreateBattle">전투 생성</button>
      <p>전투 ID: <span id="currentBattleId">-</span></p>
      <p>모드: <span id="currentMode">-</span></p>
      <p>관리자 URL: <span id="adminUrl">-</span></p>
      <p>플레이어 URL: <span id="playerUrl">-</span></p>
      <p>관전자 URL: <span id="spectatorUrl">-</span></p>
    </section>

    <!-- 가운데 패널: 참가자 관리 -->
    <section>
      <h2>참가자 추가</h2>
      <input id="pName" type="text" placeholder="플레이어 이름" />
      <select id="pTeam">
        <option value="phoenix">불사조 기사단</option>
        <option value="eaters">죽음을 먹는 자</option>
      </select>
      <br />
      <label>공격: <input id="sATK" type="number" value="3" /></label><br />
      <label>방어: <input id="sDEF" type="number" value="3" /></label><br />
      <label>민첩: <input id="sDEX" type="number" value="3" /></label><br />
      <label>행운: <input id="sLUK" type="number" value="3" /></label><br />
      <label>HP: <input id="pHP" type="number" value="100" /></label><br />
      <label>디터니: <input id="itemDittany" type="number" value="1" /></label><br />
      <label>공격 보정기: <input id="itemAtkBoost" type="number" value="1" /></label><br />
      <label>방어 보정기: <input id="itemDefBoost" type="number" value="1" /></label><br />
      <label>아바타: <input id="pAvatar" type="file" /></label><br />
      <button id="btnAddPlayer">전투 참가자 추가</button>

      <h3>불사조 기사단 목록</h3>
      <div id="rosterPhoenix"></div>

      <h3>죽음을 먹는 자 목록</h3>
      <div id="rosterEaters"></div>
    </section>

    <!-- 오른쪽 패널: 로그 & 채팅 -->
    <section>
      <h2>전투 로그</h2>
      <div id="battleLog"></div>
      <h2>채팅</h2>
      <div id="chatView"></div>
      <input id="chatText" type="text" placeholder="메시지 입력" />
      <button id="btnChatSend">전송</button>
    </section>
  </main>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/assets/js/admin.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (window.PyxisAdmin && typeof window.PyxisAdmin.init === 'function') {
        window.PyxisAdmin.init();
      } else {
        console.error("PyxisAdmin 모듈 초기화 실패");
      }
    });
  </script>
</body>
</html>
