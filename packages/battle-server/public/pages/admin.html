<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>PYXIS | 전투 관리석</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="/assets/css/pyxis-theme.css" rel="stylesheet" />
</head>
<body>
  <main class="container">
    <!-- 전투 생성 -->
    <section class="panel">
      <h2>전투 생성</h2>
      <form id="battleCreateForm" class="grid">
        <div>
          <label for="battleMode">모드</label>
          <select id="battleMode" required>
            <option value="1v1">1v1</option>
            <option value="2v2">2v2</option>
            <option value="3v3">3v3</option>
            <option value="4v4">4v4</option>
          </select>
        </div>
        <button class="btn btn-primary btn-create" type="submit">전투 생성</button>
      </form>

      <div id="battleInfo" style="display:none; margin-top:8px;">
        <div>전투 ID: <strong id="battleIdDisplay">-</strong></div>
        <div>관리자 OTP: <strong id="adminOtpDisplay">-</strong></div>
        <div>생성 시각: <span id="createTimeDisplay">-</span></div>
        <div style="margin-top:8px;">
          <button id="btnConnect" class="btn">관리자로 연결</button>
        </div>
      </div>
    </section>

    <!-- 전투 제어 -->
    <section class="panel">
      <h2>전투 제어</h2>
      <button id="btnStartBattle" class="btn" disabled>전투 시작</button>
      <button id="btnPauseBattle" class="btn" disabled>일시정지</button>
      <button id="btnEndBattle" class="btn" disabled>전투 종료</button>
    </section>

    <!-- 플레이어 추가 (이미지 업로드 포함) -->
    <section class="panel">
      <h2>플레이어 추가</h2>
      <form id="playerForm" class="grid" onsubmit="return false;">
        <div>
          <label for="playerName">이름</label>
          <input id="playerName" type="text" required />
        </div>
        <div>
          <label for="playerTeam">팀</label>
          <select id="playerTeam" required>
            <option value="A">불사조 기사단</option>
            <option value="B">죽음을 먹는 자들</option>
          </select>
        </div>
        <div>
          <label>공격(1~5)</label>
          <input id="statAttack" type="number" min="1" max="5" value="3" />
        </div>
        <div>
          <label>방어(1~5)</label>
          <input id="statDefense" type="number" min="1" max="5" value="3" />
        </div>
        <div>
          <label>민첩(1~5)</label>
          <input id="statAgility" type="number" min="1" max="5" value="3" />
        </div>
        <div>
          <label>행운(1~5)</label>
          <input id="statLuck" type="number" min="1" max="5" value="3" />
        </div>
        <div>
          <label for="itemDittany">디터니</label>
          <input id="itemDittany" type="number" min="0" value="0" />
        </div>
        <div>
          <label for="itemAttackBoost">공격보정</label>
          <input id="itemAttackBoost" type="number" min="0" value="0" />
        </div>
        <div>
          <label for="itemDefenseBoost">방어보정</label>
          <input id="itemDefenseBoost" type="number" min="0" value="0" />
        </div>
        <div>
          <label for="playerAvatar">플레이어 이미지</label>
          <input id="playerAvatar" type="file" accept="image/*" />
        </div>
        <div style="align-self:end;">
          <button id="btnAddPlayer" class="btn btn-primary" type="button">플레이어 등록</button>
        </div>
      </form>
      <div id="playerMsg" class="hint"></div>
    </section>

    <!-- 링크/OTP -->
    <section id="linksSection" class="panel" style="display:none;">
      <h2>접속 링크/OTP</h2>
      <div style="margin-bottom:6px;">
        <button id="btnGeneratePlayerOTP" class="btn" disabled>플레이어 OTP 생성</button>
        <button id="btnGenerateSpectatorOTP" class="btn" disabled>관전자 OTP 생성</button>
      </div>
      <div id="otpDisplay" style="display:none;">
        <h3>플레이어 링크</h3>
        <div id="playerOtpList"></div>
        <h3>관전자 링크</h3>
        <div id="spectatorOtpDisplay"></div>
      </div>
    </section>

    <!-- 팀 로스터 -->
    <section id="rosterCard" class="panel" style="display:none;">
      <h2>플레이어 목록</h2>
      <div class="grid">
        <div>
          <h3>불사조 기사단 (<span id="teamACount">0/4</span>)</h3>
          <div id="team1Roster"></div>
        </div>
        <div>
          <h3>죽음을 먹는 자들 (<span id="teamBCount">0/4</span>)</h3>
          <div id="team2Roster"></div>
        </div>
      </div>
    </section>

    <!-- 실시간 로그/채팅 -->
    <section class="panel">
      <h2>실시간 로그</h2>
      <div id="logViewer" class="logbox"></div>
    </section>
    <section class="panel">
      <h2>관리자 채팅</h2>
      <div class="grid">
        <select id="chatChannel">
          <option value="all">전체</option>
        </select>
        <input id="chatInput" type="text" placeholder="메시지" />
        <button id="btnSendChat" class="btn">보내기</button>
      </div>
    </section>
  </main>

  <!-- 스크립트 -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="/assets/js/pages/admin.js"></script>
</body>
</html>
