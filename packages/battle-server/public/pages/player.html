<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PYXIS - 전투 참여</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* ===== Base / Reset ===== */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }
    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #0a0a0a 0%, #000 50%, #0a0a0a 100%);
      color: #f8f6f0;
      font-size: 14px;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
    }

    /* ===== Theme Variables ===== */
    :root {
      --panel-1: rgba(26,26,26,.92);
      --panel-2: rgba(18,18,18,.92);

      --gold: #d4b77e;
      --gold-dark: #c5a266;
      --gold-bright: #e6d3aa;

      --text: #faf9f6;
      --text-dim: #e0d5c4;
      --text-muted: #b8a898;

      --border-subtle: rgba(212,183,126,.10);
      --border-1: rgba(212,183,126,.22);
      --border-2: rgba(212,183,126,.36);

      --success: #27ae60;
      --warning: #f39c12;
      --danger: #e74c3c;
      --info: #3498db;

      --shadow-soft: 0 4px 12px rgba(0,0,0,.25);
      --shadow-medium: 0 8px 24px rgba(0,0,0,.35);
      --shadow-glow: 0 0 20px rgba(212,183,126,.25);

      --radius: 14px;
      --radius-small: 8px;
      --radius-large: 18px;
    }

    /* ===== Container & Layout ===== */
    .container { max-width: 1600px; margin: 0 auto; padding: 20px 14px; min-height: 100vh; display: flex; flex-direction: column; }
    .header { text-align: center; padding: 20px 0 16px; margin-bottom: 12px; }
    .brand { font-family: 'Cinzel', serif; font-size: 28px; font-weight: 700; background: linear-gradient(135deg, var(--gold), #fff, var(--gold-bright)); -webkit-background-clip: text; background-clip: text; color: transparent; }
    .subtitle { margin-top: 4px; font-size: 11px; color: var(--text-muted); letter-spacing: 0.12em; text-transform: uppercase; }

    .player-layout { display: grid; grid-template-columns: 280px 1fr 360px; gap: 18px; flex: 1; align-items: start; }

    /* ===== Card Base ===== */
    .card { background: var(--panel-1); border: 1.5px solid var(--border-1); border-radius: var(--radius); backdrop-filter: blur(8px); box-shadow: var(--shadow-soft); }
    .card-header { padding: 14px 16px; border-bottom: 1px solid var(--border-1); }
    .card-title { font-size: 15px; font-weight: 600; color: var(--text); }
    .card-body { padding: 14px 16px 16px; }

    /* ===== Current Actor (Center Avatar) ===== */
    .current-actor {
      display:flex; flex-direction:column; align-items:center; gap:10px;
      padding:20px 16px; background: var(--panel-1);
      border:1px solid var(--border-1); border-radius: var(--radius);
    }
    .actor-avatar {
      width:120px; height:120px;
      border:2px solid var(--gold);
      background:#111; object-fit:cover;
      border-radius: 6px; /* 네모 */
    }
    .actor-name { font-weight:800; }

    /* ===== Action Buttons ===== */
    .action-grid { display:grid; grid-template-columns: repeat(2,1fr); gap: 10px; }
    .action-btn {
      padding: 10px 12px; background: var(--panel-2);
      border: 1.8px solid var(--gold); border-radius: 10px;
      color: var(--text); font-size: 13px; font-weight: 700;
      cursor: pointer; transition: .25s;
    }
    .action-btn:hover { transform: translateY(-2px); box-shadow: var(--shadow-medium), 0 0 16px rgba(212,183,126,.28); color: var(--gold-bright); }

    /* ===== Chat & Log ===== */
    .chat-messages { height: 260px; overflow-y:auto; padding:8px; background: var(--panel-2); border:1px solid var(--border-subtle); border-radius:10px; }
    .chat-message { margin-bottom:8px; font-size:12px; }
    .chat-author { font-weight:700; color: var(--gold); margin-right:6px; }
    .chat-input-area { display:flex; gap:8px; }
    .chat-input { flex:1; padding:10px; background:#0f0f0f; color:var(--text); border:1px solid var(--border-1); border-radius:8px; }
    .chat-send { padding: 10px 14px; background: linear-gradient(145deg, var(--gold), var(--gold-dark)); color:#111; border:none; border-radius:8px; font-weight:800; cursor:pointer; }

    .battle-log { height: 220px; overflow-y:auto; background: var(--panel-2); border:1px solid var(--border-subtle); border-radius:10px; padding:8px; }
    .log-entry { padding:8px; margin-bottom:6px; border-radius:8px; font-size:12px; }
    .log-system { background: rgba(52,152,219,.1); border-left:3px solid var(--info); }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="brand">Pyxis</h1>
      <p class="subtitle">Battle Arena System</p>
    </header>

    <main class="player-layout">
      <section>
        <div class="card">
          <div class="card-header"><h2 class="card-title">행동 선택</h2></div>
          <div class="card-body">
            <div class="action-grid">
              <button id="btnAttack" class="action-btn">공격</button>
              <button id="btnDefend" class="action-btn">방어</button>
              <button id="btnDodge"  class="action-btn">회피</button>
              <button id="btnPass"   class="action-btn">패스</button>
            </div>
          </div>
        </div>
      </section>

      <section class="center-column">
        <div class="current-actor">
          <img id="currentActorAvatar" class="actor-avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=unknown" alt="현재 전투자">
          <div class="actor-name" id="currentActorName">현재 전투자</div>
        </div>

        <div class="card chat-card">
          <div class="card-header"><h2 class="card-title">팀 채팅</h2></div>
          <div class="card-body">
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input-area">
              <input type="text" class="chat-input" id="chatInput" placeholder="메시지를 입력하세요..." maxlength="200">
              <button class="chat-send" id="chatSend">전송</button>
            </div>
          </div>
        </div>
      </section>

      <section>
        <div class="card">
          <div class="card-header"><h2 class="card-title">전투 로그</h2></div>
          <div class="card-body">
            <div class="battle-log" id="battleLog"></div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // 단축키 제거 → 오직 버튼 이벤트만
    document.addEventListener('DOMContentLoaded', ()=>{
      const chatInput = document.getElementById('chatInput');
      const chatSend = document.getElementById('chatSend');
      const chatMessages = document.getElementById('chatMessages');

      function sendMessage(){
        const message = chatInput.value.trim();
        if(message){
          const el = document.createElement('div');
          el.className='chat-message';
          el.innerHTML=`<span class="chat-author">나:</span><span>${message}</span>`;
          chatMessages.appendChild(el);
          chatInput.value='';
        }
      }
      chatSend.addEventListener('click', sendMessage);
      chatInput.addEventListener('keypress', e=>{ if(e.key==='Enter') sendMessage(); });
    });
  </script>
</body>
</html>
