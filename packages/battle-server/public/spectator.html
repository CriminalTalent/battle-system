// 인증 처리
function authenticate() {
  const password = (passwordInput?.value || "").trim();
  const name = (nameInput?.value || "").trim();

  if (!password) {
    showToast("비밀번호를 입력해주세요.", "error");
    return;
  }

  if (!name) {
    showToast("관전자 이름을 입력해주세요.", "error");
    return;
  }

  // URL에서 battleId 추출
  const urlParams = new URLSearchParams(window.location.search);
  battleId = urlParams.get("battle");

  if (!battleId) {
    showToast("잘못된 전투 링크입니다.", "error");
    return;
  }

  spectatorName = name; // 입력받은 이름 저장
  authBtn.disabled = true;
  authBtn.textContent = "인증 중...";

  // 소켓으로 인증 요청
  socket.emit("spectatorAuth", {
    battleId: battleId,
    token: password,
    name: spectatorName,
  });
}
